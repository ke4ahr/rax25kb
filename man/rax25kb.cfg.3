.TH RAX25KB.CFG 5 "2025-12-24" "rax25kb 2.0.0" "File Formats"
.SH NAME
rax25kb.cfg \- configuration file for rax25kb
.SH SYNOPSIS
.B rax25kb.cfg
.SH DESCRIPTION
The
.B rax25kb.cfg
file configures the rax25kb KISS bridge. It uses a simple key=value format
with support for comments (lines starting with #).
.PP
The configuration defines:
.IP \(bu 2
Serial port settings
.IP \(bu 2
Cross-connect definitions
.IP \(bu 2
Global logging and operational settings
.SH FILE FORMAT
Each line contains either:
.IP \(bu 2
A comment (starting with #)
.IP \(bu 2
A blank line (ignored)
.IP \(bu 2
A key=value pair
.PP
Values can be optionally quoted with double quotes. Whitespace around
keys and values is ignored.
.SH SERIAL PORT CONFIGURATION
Serial ports are defined with a unique 4-digit ID (0000-9999).
.SS Required Settings
.TP
.B serial_portXXXX=\fIdevice_path\fR
Device path for the serial port.
.RS
.IP "Linux:" 8
/dev/ttyUSB0, /dev/ttyACM0
.IP "Windows:" 8
COM3, COM4
.IP "macOS:" 8
/dev/cu.usbserial-*
.RE
.SS Optional Settings
.TP
.B serial_portXXXX_baud=\fIbaud_rate\fR
Baud rate (default: 9600)
.br
Common values: 1200, 2400, 4800, 9600, 19200, 38400, 57600, 115200
.TP
.B serial_portXXXX_flow_control=\fItype\fR
Flow control type (default: none)
.br
Values: none, software, hardware, dtrdsr
.RS
.IP none 8
No flow control
.IP software 8
XON/XOFF software flow control
.IP hardware 8
RTS/CTS hardware flow control
.IP dtrdsr 8
DTR/DSR flow control (Windows)
.RE
.TP
.B serial_portXXXX_stop_bits=\fIbits\fR
Number of stop bits (default: 1)
.br
Values: 1, 2
.TP
.B serial_portXXXX_parity=\fItype\fR
Parity checking (default: none)
.br
Values: none, even, odd
.TP
.B serial_portXXXX_extended_kiss=\fIboolean\fR
Enable Extended KISS support (default: false)
.br
Values: true, false, yes, no, on, off, 1, 0
.SH CROSS-CONNECT CONFIGURATION
Cross-connects define connections between endpoints. Each has a unique
4-digit ID (0000-9999).
.SS Required Settings
.TP
.B cross_connectXXXX=\fIendpoint_a\fR <-> \fIendpoint_b\fR
Defines connection between two endpoints.
.PP
.B Endpoint Types:
.RS
.TP
.B tcp:\fIaddress\fR:\fIport\fR
TCP socket endpoint (server mode)
.RS
.IP \(bu 2
tcp:0.0.0.0:8001 - Listen on all interfaces
.IP \(bu 2
tcp:127.0.0.1:8001 - Localhost only (secure)
.IP \(bu 2
tcp:192.168.1.100:8001 - Specific interface
.RE
.TP
.B serial:\fIport_id\fR:\fIkiss_port\fR
Serial port endpoint with KISS port number
.RS
.IP \(bu 2
Port ID must match a serial_portXXXX definition
.IP \(bu 2
KISS port must be 0-15 (most TNCs use 0)
.IP \(bu 2
serial:0000:0 - Serial port 0000, KISS port 0
.IP \(bu 2
serial:0001:3 - Serial port 0001, KISS port 3
.RE
.RE
.SS Optional Settings
.TP
.B cross_connectXXXX_phil_flag=\fIboolean\fR
Enable PhilFlag correction for buggy TASCO modems (default: false)
.br
Fixes KISS byte escaping issues in certain TNC chipsets including Kenwood TS-2000.
.TP
.B cross_connectXXXX_parse_kiss=\fIboolean\fR
Parse and display KISS frames (default: false)
.br
Useful for debugging and monitoring frame flow.
.TP
.B cross_connectXXXX_dump=\fIboolean\fR
Dump frames in hexadecimal format (default: false)
.br
Shows raw frame data for debugging.
.TP
.B cross_connectXXXX_dump_ax25=\fIboolean\fR
Display AX.25 frame details (default: false)
.br
Shows callsigns, digipeater paths, and frame types.
.TP
.B cross_connectXXXX_raw_copy=\fIboolean\fR
Disable KISS processing, copy bytes directly (default: false)
.br
Useful for TNC configuration or firmware updates.
.SH GLOBAL SETTINGS
.TP
.B log_level=\fIlevel\fR
Logging verbosity (default: 5)
.br
Range: 0-9 (0=EMERG, 5=NOTICE, 7=DEBUG, 9=VERBOSE)
.TP
.B logfile=\fIpath\fR
Log file path (default: none - no file logging)
.br
Example: /var/log/rax25kb.log
.TP
.B log_to_console=\fIboolean\fR
Log to console/stdout (default: true)
.TP
.B pidfile=\fIpath\fR
PID file path (default: none)
.br
Example: /var/run/rax25kb.pid
.TP
.B pcap_file=\fIpath\fR
PCAP capture file for Wireshark analysis (default: none)
.br
Example: /var/log/rax25kb.pcap
.TP
.B quiet_startup=\fIboolean\fR
Suppress startup banner (default: false)
.SH EXAMPLES
.SS Example 1: Simple Single TNC
Most basic configuration - one TNC on KISS port 0:
.PP
.nf
# Serial port definition
serial_port0000=/dev/ttyUSB0
serial_port0000_baud=9600

# Cross-connect: TNC to TCP
cross_connect0000=serial:0000:0 <-> tcp:0.0.0.0:8001
cross_connect0000_parse_kiss=true

# Logging
log_level=5
log_to_console=true
.fi
.SS Example 2: Kenwood TS-2000
Kenwood TS-2000 requires specific settings:
.PP
.nf
# TS-2000 Internal TNC
serial_port0000=/dev/ttyUSB0
serial_port0000_baud=4800
serial_port0000_stop_bits=2
serial_port0000_parity=none
serial_port0000_flow_control=none

# Cross-connect with PhilFlag
cross_connect0000=serial:0000:0 <-> tcp:127.0.0.1:8001
cross_connect0000_phil_flag=true
cross_connect0000_parse_kiss=true

log_level=5
.fi
.SS Example 3: Multiple TNCs
Three TNCs on different bands:
.PP
.nf
# VHF TNC - APRS
serial_port0000=/dev/ttyUSB0
serial_port0000_baud=9600
cross_connect0000=serial:0000:0 <-> tcp:0.0.0.0:8001

# UHF TNC - Messaging
serial_port0001=/dev/ttyUSB1
serial_port0001_baud=9600
cross_connect0001=serial:0001:0 <-> tcp:0.0.0.0:8002

# HF TNC - Packet
serial_port0002=/dev/ttyUSB2
serial_port0002_baud=1200
cross_connect0002=serial:0002:0 <-> tcp:0.0.0.0:8003

log_level=5
.fi
.SS Example 4: Multi-Port TNC
Single TNC with multiple KISS ports (if supported by TNC):
.PP
.nf
# Single TNC with multi-port support
serial_port0000=/dev/ttyUSB0
serial_port0000_baud=9600

# KISS port 0 - APRS
cross_connect0000=serial:0000:0 <-> tcp:0.0.0.0:8001

# KISS port 1 - Messaging
cross_connect0001=serial:0000:1 <-> tcp:0.0.0.0:8002

# KISS port 2 - Telemetry
cross_connect0002=serial:0000:2 <-> tcp:0.0.0.0:8003

log_level=5
.fi
.PP
.B Note:
Most TNCs only support KISS port 0. Check your TNC manual!
.SS Example 5: Serial-to-Serial Bridge
Bridge two TNCs together for digipeating:
.PP
.nf
# TNC 1
serial_port0000=/dev/ttyUSB0
serial_port0000_baud=9600

# TNC 2
serial_port0001=/dev/ttyUSB1
serial_port0001_baud=9600

# Bridge them on KISS port 0
cross_connect0000=serial:0000:0 <-> serial:0001:0
cross_connect0000_parse_kiss=true

log_level=5
.fi
.SS Example 6: KISS Port Translation
Translate between different KISS ports:
.PP
.nf
# Standard KISS TNC
serial_port0000=/dev/ttyUSB0
serial_port0000_baud=9600
serial_port0000_extended_kiss=false

# Extended KISS TNC
serial_port0001=/dev/ttyUSB1
serial_port0001_baud=9600
serial_port0001_extended_kiss=true

# Translate port 0 to port 3
cross_connect0000=serial:0000:0 <-> serial:0001:3
cross_connect0000_parse_kiss=true

log_level=5
.fi
.SS Example 7: Windows Configuration
Windows uses COM ports:
.PP
.nf
# Windows COM ports
serial_port0000=COM3
serial_port0000_baud=9600

serial_port0001=COM4
serial_port0001_baud=115200

# Cross-connects
cross_connect0000=serial:0000:0 <-> tcp:127.0.0.1:8001
cross_connect0001=serial:0001:0 <-> tcp:0.0.0.0:8002

# Windows paths
logfile=C:\\ProgramData\\rax25kb\\rax25kb.log
pidfile=C:\\ProgramData\\rax25kb\\rax25kb.pid

log_level=5
.fi
.SS Example 8: Remote and Local Access
Public APRS access with secure local management:
.PP
.nf
serial_port0000=/dev/ttyUSB0
serial_port0000_baud=9600

# Public APRS access
cross_connect0000=serial:0000:0 <-> tcp:0.0.0.0:8001
cross_connect0000_parse_kiss=true

# Localhost-only management (raw mode)
cross_connect0001=serial:0000:0 <-> tcp:127.0.0.1:8002
cross_connect0001_raw_copy=true

log_level=5
.fi
.SS Example 9: Full-Featured Configuration
Complete example with all features:
.PP
.nf
# Serial port with all settings
serial_port0000=/dev/ttyUSB0
serial_port0000_baud=115200
serial_port0000_flow_control=hardware
serial_port0000_stop_bits=1
serial_port0000_parity=none
serial_port0000_extended_kiss=false

# Cross-connect with all options
cross_connect0000=serial:0000:0 <-> tcp:0.0.0.0:8001
cross_connect0000_phil_flag=false
cross_connect0000_parse_kiss=true
cross_connect0000_dump=false
cross_connect0000_dump_ax25=true
cross_connect0000_raw_copy=false

# Global settings
log_level=6
logfile=/var/log/rax25kb.log
log_to_console=true
pidfile=/var/run/rax25kb.pid
pcap_file=/var/log/rax25kb.pcap
quiet_startup=false
.fi
.SH TNC-SPECIFIC SETTINGS
.SS Kenwood TS-2000
.nf
serial_port0000_baud=4800
serial_port0000_stop_bits=2
cross_connect0000_phil_flag=true
.fi
.SS Mobilinkd TNC3
.nf
serial_port0000_baud=115200
serial_port0000_flow_control=hardware
.fi
.SS Kantronics KPC-3+
.nf
serial_port0000_baud=9600
serial_port0000_stop_bits=1
serial_port0000_parity=none
.fi
.SS Argent Data Tracker2
.nf
serial_port0000_baud=9600
serial_port0000_stop_bits=1
serial_port0000_parity=none
.fi
.SS TASCO Modems
.nf
cross_connect0000_phil_flag=true
.fi
.SH MIGRATION FROM v1.x
Version 2.0 changed the configuration format. Convert old configurations:
.PP
.B Old format (v1.x):
.nf
serial_port=/dev/ttyUSB0
baud_rate=9600
tcp_address=0.0.0.0
tcp_port=8001
phil_flag=false
parse_kiss=true
.fi
.PP
.B New format (v2.0):
.nf
# Serial port with ID
serial_port0000=/dev/ttyUSB0
serial_port0000_baud=9600

# Cross-connect (KISS port 0 is default)
cross_connect0000=serial:0000:0 <-> tcp:0.0.0.0:8001
cross_connect0000_phil_flag=false
cross_connect0000_parse_kiss=true

# Global settings (unchanged)
log_level=5
.fi
.PP
.B Key changes:
.IP \(bu 2
Serial ports now have 4-digit IDs (0000-9999)
.IP \(bu 2
Must specify KISS port number (usually 0)
.IP \(bu 2
Per-connection settings moved to cross-connect entries
.IP \(bu 2
Cross-connects explicitly define endpoint connections
.SH IMPORTANT NOTES
.SS KISS Port Numbers
.IP \(bu 2
Default KISS TNC address is always port 0
.IP \(bu 2
Most TNCs only support port 0
.IP \(bu 2
Multi-port requires TNC hardware/firmware support
.IP \(bu 2
KISS ports numbered 0-15 (4-bit addressing)
.IP \(bu 2
Always use port 0 unless TNC documentation specifies otherwise
.SS Serial Port Formats
.IP \(bu 2
8N1: Most common (8 data, no parity, 1 stop)
.IP \(bu 2
8N2: Some TNCs like TS-2000 (8 data, no parity, 2 stop)
.IP \(bu 2
Default is 8N1 if not specified
.SS Security
.IP \(bu 2
Use 127.0.0.1 for local-only access
.IP \(bu 2
Use 0.0.0.0 only when remote access needed
.IP \(bu 2
No authentication on TCP connections
.IP \(bu 2
Configure firewall for public-facing services
.SS Performance
.IP \(bu 2
Each cross-connect: ~1-5% CPU
.IP \(bu 2
Serial-to-serial: ~2-10% CPU (bidirectional)
.IP \(bu 2
Parsing/dumping adds ~2-5% CPU overhead
.SH TROUBLESHOOTING
.SS Configuration not loading
.IP \(bu 2
Check file syntax (key=value format)
.IP \(bu 2
Ensure serial ports defined before cross-connects
.IP \(bu 2
Verify KISS port numbers are 0-15
.IP \(bu 2
Check that serial port IDs match in cross-connects
.SS No packets received
.IP \(bu 2
Verify KISS port 0 (default TNC address)
.IP \(bu 2
Enable parse_kiss=true for diagnostics
.IP \(bu 2
Check TNC is in KISS mode
.IP \(bu 2
Verify serial port settings
.SS Cross-connect errors
.IP \(bu 2
"Unknown serial port ID" - Define serial port first
.IP \(bu 2
"KISS port must be 0-15" - Use valid port number
.IP \(bu 2
"Invalid endpoint format" - Check syntax (tcp:addr:port or serial:id:port)
.SH FILES
.TP
.B rax25kb.cfg
Default configuration file (current directory)
.TP
.B /etc/rax25kb/rax25kb.cfg
System-wide configuration file
.SH SEE ALSO
.BR rax25kb (1),
.BR ax25 (4)
.SH AUTHOR
Written by Kris Kirby and rax25kb contributors.
.SH COPYRIGHT
Copyright \(co 2025 rax25kb contributors.
License GPLv3+: GNU GPL version 3 or later.
.SH BUGS
Report bugs to: https://github.com/ke4ahr/rax25kb/issues