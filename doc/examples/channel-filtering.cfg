# rax25kb Channel Filtering and Remapping Example
# Version: 1.6.8+
#
# This example shows how to use kiss_chan for legacy applications
# that don't understand multi-channel KISS.

# ============================================================================
# GLOBAL SETTINGS
# ============================================================================

max_tcp_clients=2
log_level=6

# ============================================================================
# SCENARIO: Multi-Radio Setup with Legacy Applications
# ============================================================================
#
# Hardware: Single dual-channel TNC on /dev/ttyUSB0
#   - Channel 0: VHF 144.390 MHz (APRS)
#   - Channel 1: UHF 445.925 MHz (Packet BBS)
#
# Applications:
#   - Port 8001: Legacy APRS app (doesn't know about channels)
#   - Port 8002: Legacy BBS software (doesn't know about channels)
#
# Problem: Both apps think they're connected to a single-channel TNC
# Solution: Use kiss_chan to filter and remap channels

# ============================================================================
# CROSS-CONNECT 0000: Primary Port (KISS Channel 0)
# ============================================================================

# This is the primary port - it controls serial parameters
cross_connect0000.serial_port=/dev/ttyUSB0
cross_connect0000.baud_rate=19200
cross_connect0000.flow_control=hardware
cross_connect0000.kiss_port=0          # Primary KISS port

# TCP server for VHF APRS
cross_connect0000.tcp_mode=server
cross_connect0000.tcp_address=0.0.0.0
cross_connect0000.tcp_port=8001

# Channel filtering and remapping
cross_connect0000.kiss_chan=0          # Only channel 0 packets
# Behavior:
#   Outgoing: TNC channel 0 → App sees KISS channel 0
#   Incoming: App sends KISS channel 0 → TNC receives channel 0
# App sees only channel 0 traffic, thinks it's a single-channel TNC

# ============================================================================
# CROSS-CONNECT 0001: Secondary Port (KISS Channel 1)
# ============================================================================

# Secondary port - inherits serial parameters from port 0
cross_connect0001.serial_port=/dev/ttyUSB0
cross_connect0001.kiss_port=1          # Secondary KISS port (1-15)
# Note: No baud_rate, flow_control - inherited from KISS port 0

# TCP server for UHF BBS
cross_connect0001.tcp_mode=server
cross_connect0001.tcp_address=0.0.0.0
cross_connect0001.tcp_port=8002

# Channel filtering and remapping
cross_connect0001.kiss_chan=1          # Only channel 1 packets
# Behavior:
#   Outgoing: TNC channel 1 → App sees KISS channel 0
#   Incoming: App sends KISS channel 0 → TNC receives channel 1
# App sees only channel 1 traffic, thinks it's a single-channel TNC

# ============================================================================
# RESULT
# ============================================================================
#
# Port 8001 (APRS):
#   - Receives only channel 0 packets from TNC
#   - Sees them as KISS channel 0
#   - Sends to KISS channel 0, goes to TNC channel 0
#   - Legacy app works perfectly
#
# Port 8002 (BBS):
#   - Receives only channel 1 packets from TNC
#   - Sees them as KISS channel 0
#   - Sends to KISS channel 0, goes to TNC channel 1
#   - Legacy app works perfectly
#
# Both apps think they have a dedicated single-channel TNC!

# ============================================================================
# ALTERNATIVE: All Channels (No Filtering)
# ============================================================================
#
# If you want an app to see all channels without remapping:
#
# cross_connect0002.serial_port=/dev/ttyUSB0
# cross_connect0002.kiss_port=2
# cross_connect0002.tcp_port=8003
# cross_connect0002.kiss_chan=-1       # All channels, no remapping
#
# This app sees both channel 0 and channel 1 with correct KISS headers
# Useful for monitoring/logging applications
