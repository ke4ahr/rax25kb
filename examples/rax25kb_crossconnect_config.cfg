# rax25kb Configuration File
# Multi-port cross-connect configuration example
#
# This configuration demonstrates:
# - Multiple serial ports
# - Serial-to-TCP connections
# - Serial-to-Serial connections with KISS port translation
# - Standard KISS to Extended KISS translation

# ==============================================================================
# SERIAL PORT DEFINITIONS
# ==============================================================================
# Format: serial_portXXXX where XXXX is a unique ID (0000-9999)
#
# Each serial port requires:
#   serial_portXXXX = device path
#
# Optional settings (per port):
#   serial_portXXXX_baud = baud rate (default: 9600)
#   serial_portXXXX_flow_control = none|software|hardware|dtrdsr (default: none)
#   serial_portXXXX_stop_bits = 1|2 (default: 1)
#   serial_portXXXX_parity = none|even|odd (default: none)
#   serial_portXXXX_extended_kiss = true|false (default: false)
#
# Standard KISS: Supports ports 0-15 in single byte command
# Extended KISS: Additional addressing/features (implementation specific)

# Serial Port 0000 - Standard KISS TNC on /dev/ttyUSB0
serial_port0000=/dev/ttyUSB0
serial_port0000_baud=9600
serial_port0000_flow_control=none
serial_port0000_stop_bits=1
serial_port0000_parity=none
serial_port0000_extended_kiss=false

# Serial Port 0001 - Extended KISS TNC on /dev/ttyUSB1
serial_port0001=/dev/ttyUSB1
serial_port0001_baud=9600
serial_port0001_flow_control=hardware
serial_port0001_stop_bits=1
serial_port0001_parity=none
serial_port0001_extended_kiss=true

# Serial Port 0002 - High-speed TNC on /dev/ttyUSB2
serial_port0002=/dev/ttyUSB2
serial_port0002_baud=115200
serial_port0002_flow_control=hardware
serial_port0002_stop_bits=1
serial_port0002_parity=none
serial_port0002_extended_kiss=false

# ==============================================================================
# CROSS-CONNECT DEFINITIONS
# ==============================================================================
# Format: cross_connectXXXX where XXXX is a unique ID (0000-9999)
#
# Syntax: cross_connectXXXX = endpoint_a <-> endpoint_b
#
# Endpoint types:
#   tcp:address:port        - TCP socket endpoint
#   serial:port_id:kiss_port - Serial port endpoint with KISS port number
#
# Examples:
#   tcp:0.0.0.0:8001                    - Listen on all interfaces, port 8001
#   tcp:127.0.0.1:8002                  - Listen on localhost only, port 8002
#   serial:0000:0                       - Serial port 0000, KISS port 0
#   serial:0001:5                       - Serial port 0001, KISS port 5
#
# Optional settings (per cross-connect):
#   cross_connectXXXX_phil_flag = true|false (default: false)
#   cross_connectXXXX_dump = true|false (default: false)
#   cross_connectXXXX_parse_kiss = true|false (default: false)
#   cross_connectXXXX_dump_ax25 = true|false (default: false)
#   cross_connectXXXX_raw_copy = true|false (default: false)

# ------------------------------------------------------------------------------
# Cross-Connect 0000: Default - Serial port 0000, KISS port 0 -> TCP
# ------------------------------------------------------------------------------
# This is the default configuration - connects the first serial port's
# KISS port 0 to a TCP socket on port 8001
cross_connect0000=serial:0000:0 <-> tcp:0.0.0.0:8001
cross_connect0000_parse_kiss=true
cross_connect0000_dump_ax25=false
cross_connect0000_phil_flag=false
cross_connect0000_raw_copy=false

# ------------------------------------------------------------------------------
# Cross-Connect 0001: Serial port 0000, KISS port 1 -> TCP
# ------------------------------------------------------------------------------
# Second KISS port on the first TNC, accessible via different TCP port
cross_connect0001=serial:0000:1 <-> tcp:0.0.0.0:8002
cross_connect0001_parse_kiss=true

# ------------------------------------------------------------------------------
# Cross-Connect 0002: Serial-to-Serial with KISS port translation
# ------------------------------------------------------------------------------
# Connect standard KISS port 0 on serial 0000 to extended KISS port 3 on serial 0001
# This automatically translates between standard KISS and extended KISS formats
cross_connect0002=serial:0000:2 <-> serial:0001:3
cross_connect0002_parse_kiss=true
cross_connect0002_phil_flag=false

# ------------------------------------------------------------------------------
# Cross-Connect 0003: Serial-to-Serial same KISS port
# ------------------------------------------------------------------------------
# Bridge two TNCs together on the same KISS port number
# Useful for relay/digipeater configurations
cross_connect0003=serial:0000:3 <-> serial:0002:3
cross_connect0003_parse_kiss=true

# ------------------------------------------------------------------------------
# Cross-Connect 0004: High-speed TNC with PhilFlag correction
# ------------------------------------------------------------------------------
# For buggy TASCO modem chipsets that need PhilFlag correction
cross_connect0004=serial:0002:0 <-> tcp:0.0.0.0:8003
cross_connect0004_phil_flag=true
cross_connect0004_parse_kiss=true

# ------------------------------------------------------------------------------
# Cross-Connect 0005: Raw copy mode (no KISS processing)
# ------------------------------------------------------------------------------
# Direct pass-through for TNC configuration or firmware updates
cross_connect0005=serial:0002:1 <-> tcp:0.0.0.0:8004
cross_connect0005_raw_copy=true
cross_connect0005_parse_kiss=false

# ------------------------------------------------------------------------------
# Cross-Connect 0006: Localhost only connection
# ------------------------------------------------------------------------------
# More secure - only accessible from local machine
cross_connect0006=serial:0001:0 <-> tcp:127.0.0.1:8005
cross_connect0006_parse_kiss=true

# ==============================================================================
# GLOBAL SETTINGS
# ==============================================================================

# Logging
log_level=6
logfile=/var/log/rax25kb.log
log_to_console=true

# Process management
pidfile=/var/run/rax25kb.pid

# Packet capture (all cross-connects)
pcap_file=/var/log/rax25kb.pcap

# Startup
quiet_startup=false

# ==============================================================================
# WINDOWS EXAMPLE
# ==============================================================================
# For Windows systems, use COM ports:
#
# serial_port0000=COM3
# serial_port0000_baud=9600
# serial_port0001=COM4
# serial_port0001_baud=115200
#
# cross_connect0000=serial:0000:0 <-> tcp:0.0.0.0:8001
# cross_connect0001=serial:0001:0 <-> tcp:127.0.0.1:8002
#
# logfile=C:\ProgramData\rax25kb\rax25kb.log
# pidfile=C:\ProgramData\rax25kb\rax25kb.pid
# pcap_file=C:\ProgramData\rax25kb\packets.pcap

# ==============================================================================
# CONFIGURATION SCENARIOS
# ==============================================================================

# Scenario 1: Single TNC with multiple applications
# --------------------------------------------------
# One TNC with APRS on port 0, messaging on port 1
# serial_port0000=/dev/ttyUSB0
# cross_connect0000=serial:0000:0 <-> tcp:0.0.0.0:8001
# cross_connect0001=serial:0000:1 <-> tcp:0.0.0.0:8002

# Scenario 2: Dual TNC digipeater
# --------------------------------
# Bridge two TNCs together for repeating
# serial_port0000=/dev/ttyUSB0
# serial_port0001=/dev/ttyUSB1
# cross_connect0000=serial:0000:0 <-> serial:0001:0

# Scenario 3: KISS to Extended KISS gateway
# ------------------------------------------
# Translate between standard and extended KISS
# serial_port0000=/dev/ttyUSB0
# serial_port0000_extended_kiss=false
# serial_port0001=/dev/ttyUSB1
# serial_port0001_extended_kiss=true
# cross_connect0000=serial:0000:0 <-> serial:0001:0

# Scenario 4: Remote access with local management
# ------------------------------------------------
# Public access on 8001, local management on 8002
# serial_port0000=/dev/ttyUSB0
# cross_connect0000=serial:0000:0 <-> tcp:0.0.0.0:8001
# cross_connect0001=serial:0000:0 <-> tcp:127.0.0.1:8002
# cross_connect0001_raw_copy=true

# Scenario 5: Multi-port TNC with selective routing
# --------------------------------------------------
# Route different KISS ports to different applications
# serial_port0000=/dev/ttyUSB0
# cross_connect0000=serial:0000:0 <-> tcp:0.0.0.0:8001  # APRS
# cross_connect0001=serial:0000:1 <-> tcp:0.0.0.0:8002  # Messaging
# cross_connect0002=serial:0000:2 <-> tcp:0.0.0.0:8003  # Telemetry
# cross_connect0003=serial:0000:3 <-> tcp:0.0.0.0:8004  # Experimental

# ==============================================================================
# NOTES
# ==============================================================================
#
# KISS Port Numbers:
#   - Standard KISS supports ports 0-15 (4 bits)
#   - Port 0 is typically the default/primary port
#   - Not all TNCs support multiple ports
#
# Extended KISS:
#   - Implementation-specific features
#   - May support additional addressing
#   - Set extended_kiss=true for compatible hardware
#
# PhilFlag:
#   - Only enable for buggy TASCO modem chipsets
#   - Fixes improper KISS byte escaping
#   - Serial->TCP: Escapes unescaped 0xC0 bytes
#   - TCP->Serial: Escapes 'C' and 'c' to prevent TC0\n interpretation
#
# Raw Copy Mode:
#   - Disables all KISS processing
#   - Transparent bidirectional byte stream
#   - Useful for TNC configuration, firmware updates
#   - Cannot be combined with KISS parsing
#
# Performance:
#   - Each cross-connect runs in separate threads
#   - Serial-to-serial connects use 2 threads (bidirectional)
#   - Serial-to-TCP spawns new threads per client connection
#   - CPU usage: ~1-5% per active connection
#
# Limitations:
#   - One TCP client per cross-connect at a time
#   - Serial ports cannot be shared between cross-connects
#   - KISS port numbers must match actual TNC configuration
#   - TCP-to-TCP cross-connects not supported
#
# ==============================================================================